\chapter[Conocimientos previos]{Conocimientos previos sobre las tecnologías usadas.}

En este segundo capítulo vamos a explicar cuales son y los conocimientos previos que teníamos sobre las tecnologías que hemos usado en el proyecto, así como una breve explicación de su funcionamiento, para que se usa y explicación breve sobre su historia y sus recientes versiones.

El elemento principal usado en el proyecto es el lenguaje de programación Java, en cual se programa tanto la aplicación web como la aplicación en el móvil, pero además de los diferentes SDK de Android y de Google App Engine, hace falta muchas otras tecnologías y lenguajes como pueden ser SQL, XML, UML, GIT. Además de los conocimientos básicos sobre criptografía de clave pública necesarios para realizar todo el proceso de firma digital.   

\section{El lenguaje de programación Java}

Java es un lenguaje de programación orientado a objetos que fue diseñado por Jame Gosling\footnote{Para más información sobre Jame Gosling: \url{http://en.wikipedia.org/wiki/James\_Gosling}} para Sun Microsystems, que recientemente ha sido comprada por Oracle Corporation. Fue lanzado en 1995 y fue el centro de toda la plataforma Java de Sun Microsystems. Es un lenguaje con una sintaxis muy parecida a C o C++, pero con la gran ventaja de que el manejo de punteros y objetos es automático, al igual que la recogida de basura.

Java es un lenguaje en el que hay que compilar los código fuentes para crear unos archivos intermedios llamados bytecodes, los archivos *.class, que luego serán interpretados por la máquina virtual de Java (JVM), que depende de la arquitectura en la que se quiera ejecutar la aplicación java. Gracias a esto se puede decir que java es un lenguaje multiplataforma, lo que significa que un mismo código java se puede ejecutar en un linux, en un windows, un mac o cualquier otro sistema para el cual exista una máquina virtual, lo que en inglés se llama "write once, run anywhere" (WORA). Además de esta gran ventaja Java es un lenguaje de propósito general, concurrente, basado en clases y orientado a objetos. Java es el segundo lenguaje de programación más popular de 2012, gracias a las aplicaciones web cliente-servidor que tienen tanto auge en estos momentos, como podemos ver en la figura \ref{fig:indicetiobe}.

\begin{figure}
  \centering
    \includegraphics[scale=0.9]{./ConocimientosPrevios/imagenes/indiceTiobe.png}
  \caption{Índice tiobe en septiembre del 2012. \url{http://www.tiobe.com/}}
  \label{fig:indicetiobe}
\end{figure} 

%TODO: revisar este párrafo, por si hay que ponerlo mejor en la historia
La implementación original y las referencias del compilador de java, máquinas virtuales y las librerías de clases fue desarrollado por Sun en 1995, pero en el 2007 gracias a la lavor de la comunidad, Sun Microsystem cambio la licencia de todas las tecnologías Java a GNU General Public License, por lo que se abría la posibilidad a que se crearan versiones alternativas de compiladores bajo licencia GNU como GNU Compiler para Java o GNU Classpath.

En el proyecto la versión usada fue la versión Java SE 6.

\subsection{Historia}

Originalmente Java nació como un proyecto de James Gosling, Mike Sheridan, and Patrick Naughton en 1991, y estaba diseñado para una televisión interactiva pero era muy avanzado para lo que la industria de la televisión por clave de la época podía necesitar. En su origen fue llamado como Oak, por problemas con el nombre, ya que era una marca registrada cambiaron a llamarlo Green y posteriormente ya lo renombraron a Java como en la actualidad. Hay muchas teorías sobre el porque se llama Java, una de ellas es que había una cafetería llamada Java Coffe donde Jame, Mike and Patrick pasaron muchas horas consumiendo café.

La idea de James Gosling era crear una máquina virtual y un lenguaje de programación con la sintaxis y la estructura de C/C++ para que la curva de aprendizaje fuera muy suave para programadores que en la época sabían C/C++.

Sun Microsystem lanzó Java 1.0 en 1995, con la principal característica de que una vez escrito un código fuente no había que modificarlo para que funcionara en las diferentes máquinas, lo que anteriormente hemos llamado con el acrónimos en inglés WORA (Write Once, Run Anywhere). Rápidamente todos los navegadores de la época empezaron a soportar applet java en las páginas web, por lo que Java se volvió muy popular en la época. La nueva versión Java 2 fue lanzada en 1998-1999 y con ella llegarón las distinciones para las diferentes plataformas, como por ejemplo Java2EE para aplicaciones corporativas o una versión ligera llamada Java2ME que estaba diseñada para funcionar en los diferentes telefónos de la época, y todas las demás que se agrupan en la versión Java2SE, que es la versión estandar.

En 1997, Sun Microsystem intentó formalizar Java mediante una norma ISO/IEC pero se retiró del proceso y dio todo el control a la comunidad. Sun ofrecia implementaciones gratuitas y generaba dinero vendiendo algunas licencias de productos como Java Enterprise System. Una cosa importante es que Sun distingue entre el SDK (Kit de desarrollo) y el JRE (Entorno de ejecución) en el que van incluidos los compiladores, debugger, etc.

El 13 de noviembre del 2006, Sun lanzó Java gratis y software libre, bajo la licencia GNU General Public License (GPL). El proceso concluyó el 8 de mayo del 2007.

En 2009-2010 Oracle Corporation compró Sun Microsystem por lo que Java actualmente pertenece a Oracle.

\subsection{Versiones}

\begin{itemize}

	\item \textbf{JDK 1.0} (23 de enero de 1996): Primer lanzamiento
	
	\item \textbf{JDK 1.1} (19 de febrero de 1997): Las primeras características añadidas fuero una reestructuración intensiva del modelo de eventos AWT (Abstract Windowing Toolkit), clases internas (inner classes), JavaBeans, JDBC (Java Database Connectivity), para la integración de bases de datos y RMI (Remote Method Invocation).
	
     (8 de diciembre de 1998): Recibió el nombre en clave Playground. Esta y las siguientes versiones fueron recogidas bajo la denominación Java 2 y el nombre "J2SE" (Java 2 Platform, Standard Edition), reemplazó a JDK para distinguir la plataforma base de J2EE (Java 2 Platform, Enterprise Edition) y J2ME (Java 2 Platform, Micro Edition). 
    Se añadieron las siguientes mejoras, la palabra reservada strictfp, reflexión en la programación, la API gráfica ( Swing) fue integrada en las clases básicas, la máquina virtual (JVM) de Sun fue equipada con un compilador JIT (Just in Time) por primera vez, Java Plug-in, Java IDL, una implementación de IDL (Lenguaje de Descripción de Interfaz) para la interoperabilidad con CORBA y Colecciones.

    \item \textbf{J2SE 1.3} (8 de mayo de 2000): Recibió el nombre en clave Kestrel. Los cambios más notables fueron: la inclusión de la máquina virtual de HotSpot JVM, RMI fue cambiado para que se basara en CORBA, JavaSound, se incluyó el Java Naming and Directory Interface (JNDI) en el paquete de bibliotecas principales (anteriormente disponible como una extensión), Java Platform Debugger Architecture (JPDA).

    \item \textbf{J2SE 1.4} (6 de febrero de 2002): Recibió el nombre en clave Merlin. Este fue el primer lanzamiento de la plataforma Java desarrollado bajo el Proceso de la Comunidad Java como JSR 59. Las principales características que se le añadieron fueron palabra reservada assert, expresiones regulares modeladas al estilo de las expresiones regulares Perl, encadenación de excepciones, non-blocking NIO (New Input/Output), logging API, API I/O para la lectura y escritura de imágenes en formatos como JPEG o PNG, parser XML integrado y procesador XSLT (JAXP), seguridad integrada y extensiones criptográficas (JCE, JSSE, JAAS), Java Web Start incluido.
    
    \item \textbf{J2SE 5.0} (30 de septiembre de 2004): Recibió el nombre en clave Tiger. Estos fueron los cambios mas importantes, plantillas (genéricos), metadatos, también llamados anotaciones, permite a estructuras del lenguaje como las clases o los métodos, ser etiquetados con datos adicionales, que puedan ser procesados posteriormente por utilidades de proceso de metadatos, autoboxing/unboxing, conversiones automáticas entre tipos primitivos (Como los int) y clases de envoltura primitivas (Como Integer), enumeraciones, varargs (número de argumentos variable), el último parámetro de un método puede ser declarado con el nombre del tipo seguido por tres puntos (por ejemplo \textit{void drawtext(String... lines)}). En la llamada al método, puede usarse cualquier número de parámetros de ese tipo, que serán almacenados en un array para pasarlos al método, bucle for mejorado, La sintaxis para el bucle for se ha extendido con una sintaxis especial para iterar sobre cada miembro de un array o sobre cualquier clase que implemente Iterable, como la clase estándar Collection, de la siguiente forma:
\begin{figure}
	\begin{lstlisting}[language=Java]
	 void displayWidgets (Iterable<Widget> widgets) {
		 for (Widget w : widgets) {
		     w.display();
		 }
	 }
	\end{lstlisting}
	\caption{Código ejemplo código for mejorado.}
\end{figure}

    \item \textbf{Java SE 6} (11 de diciembre de 2006): Recibió el nombre en clave Mustang. En esta versión, Sun cambió el nombre "J2SE" por Java SE y eliminó el ".0" del número de versión. Los cambios más importantes introducidos en esta versión fueron un nuevo marco de trabajo y APIs que hacen posible la combinación de Java con lenguajes dinámicos como PHP, Python, Ruby y JavaScript, el motor Rhino, de Mozilla, una implementación de Javascript en Java, un cliente completo de Servicios Web y soporta las últimas especificaciones para Servicios Web, mejoras en la interfaz gráfica y en el rendimiento.
    
    \item \textbf{Java SE 7}: Su nombre en clave es Dolphin. Su lanzamiento fue en julio de 2011. Y las principales nuevas características fuero: soporte para XML dentro del propio lenguaje, un nuevo concepto de superpaquete, soporte para closures, introducción de anotaciones estándar para detectar fallos en el software.

\end{itemize}

\section{El entorno de programación Eclipse.}

Eclipse es un entorno integral de desarrollo que consta de un entorno de desarrollo integrado (IDE) y es extensible mediante plugins que está escrito en Java. Puede ser usado para una larga lista de lenguajes de programación como pueden ser,  C, C++, Haskell, Perl, PHP, Python, Android y un largo etcetera. Fue originalmente desarrollado por IBM y fue lanzado con la licencia de software Eclipse Public License\footnote{Para más información visite: \url{http://en.wikipedia.org/wiki/Eclipse\_Public\_License}} la cual es una licencia de software libre. El SDK de Eclipse es libre y tiene licencia open source por lo que cualquier persona con los conocimientos puede programar el puglin que necesite para Eclipse. Fue el primer entorno de programación que funcionó bajo GNU Classpath y que funcionaba sin problemas con IcedTea. En la figura \ref{fig:pantallaEclipse} se puede ver el aspecto que tiene.

\begin{figure}
  \centering
    \includegraphics[scale=0.5]{./ConocimientosPrevios/imagenes/pantallaEclipse.png}
  \caption{Eclipse 4.2 Juno.}
  \label{fig:pantallaEclipse}
\end{figure} 

En el proyecto hemos usado la versión Indigo, que equivale a la versión 3.7 de eclipse.

\subsection{Historia}

Eclipse comenzó como un proyecto de IBM Canadá. En noviembre de 2001 se creó un grupo de empresas para promover el desarrollo de Eclipse como software libre, los miembros iniciales eran Borland, IBM, Merant, QNX Software Systems, Rational Software, Red Hat, SuSE, TogetherSoft and WebGain. Finalmente en enero de 2004 se creó la Eclipse Foundation. 

\subsection{Versiones}

\begin{itemize}

	\item \textbf{Versión 3.0} (21 de junio de 2004)
	
	\item \textbf{Versión 3.1} (28 de junio de 2005)
	
	\item \textbf{Versión 3.2} (30 de junio de 2006): recibió el nombre de Callisto.
	
	\item \textbf{Versión 3.3} (29 de junio de 2007): recibió el nombre de Europa.
	
	\item \textbf{Versión 3.4} (25 de junio de 2008): recibió el nombre de Ganymede.
	
	\item \textbf{Versión 3.5} (24 de junio de 2009): recibió el nombre de Galileo.
	
	\item \textbf{Versión 3.6} (23 de junio de 2010): recibió el nombre de Helios.
	
	\item \textbf{Versión 3.7} (22 de junio de 2011): recibió el nombre de Indigo.
	
	\item \textbf{Versión 4.2} (27 de junio de 20012): recibió el nombre de Juno.
	
	\item \textbf{Versión 4.3} (26 de junio de 2004): esta será la proxima versión, que saldrá el próximo año y recibirá el nombre de Kepler.

\end{itemize}

\section{Criptografía.}

La criptografía es la ciencia que se encarga del estudio de técnicas para proteger una comunicación, para que solamente la gente autorizada pueda verla, leerla y entenderla. En la actualidad la criptografía es un término que se usa de forma similar a encriptación, que es el proceso para transformar información mediante diferentes algoritmos en un mensaje que no pueda entender un atacante que intercepte la comunicación. 


%Añadir el número de capitulo aquí... en vez de el especifico.. xD
En el proyecto hemos usado una criptografía llamada Criptografía de Clave Pública, que como veremos a continuación en la historia y en el capítulo especifico en el que se explica la criptografía usada en profundidad, consta de dos claves que están enlazadas matemáticamente y que si sabemos una no podemos averiguar la otra, una es pública que se le pasaría a la persona que quiera desencriptar el mensaje, que es la que da nombre a este algoritmo y otra privada que solo conoce la persona que quiere encriptar el mensaje.

La criptografía ha evolucionado y ya no solo se usan para proteger mensajes, si no que también se usa para proteger la integridad de dichos, que es uno de los usos más común de este tipo de criptografía.

\subsection{Historia}

Podemos hacer dos grandes grupos dentro de la historia de la criptografía, la criptografía clásica y la criptografía durante la época de los ordenadores.

	Durante la época de la criptografía clásica solo se quería proteger el mensaje que se enviaba de la mirada de curiosos y enemigos por lo que solo existian algoritmos de encriptación, la integridad del mensaje no importaba en esa época.  
	
	En dicha época todos los algoritmos de cifrados que existían eran por transposición o sustitución de caracteres. A continuación vamos a poner unos ejemplos de los algoritmos mas famosos. 
\begin{itemize}
	\item \textbf{Cifrado Cesar:} dicho cifrado es famoso porque los usaban las centurias romanas para comunicarse entre ellas y que si un mensaje era interceptado no pudiera ser leido. Consiste en sustituir cada caracter del mensaje por el que hay tres lugares a la derecha. Por ejemplo si tenemos el mensaje ``Hola" si lo ciframos con este cifrado conseguimos ``Krod", en la figura \ref{fig:cifradoCesar} podemos ver como es el cifrado.
	Para desencriptar solo habría que intercambiar por la tercera letra anterior.
\begin{figure}
  \centering
    \includegraphics[scale=0.6]{./ConocimientosPrevios/imagenes/cifradoCesar.png}
  \caption{Ejemplo Cifrado Cesar}
  \label{fig:cifradoCesar}
\end{figure} 
	
	\item \textbf{Cifrado Homofónico:} Es una evolución del siguiente, pero en vez de sustituir siempre por el mismo carácter lo que se hace es tener la posibilidad de poder realizar varios cambios posibles, por lo que un mismo mensaje podría generar varios textos cifrados, complicando así su desencriptación. En la figura \ref{fig:cifradoHomofonico} podemos ver una tabla sencilla de sustitución para realizar el cifrado. Por ejemplo si ciframos la palabra ``PLATON" nos daría de resultado ``882110772963", pero podríamos sustituir la P no solo por 88 si no por cualquier valor de la tabla dando lugar a que pudieramos crear varios mensajes cifrados.
	
\begin{figure}
  \centering
    \includegraphics[scale=0.7]{./ConocimientosPrevios/imagenes/cifradoHomofonico.png}
  \caption{Tabla para cifrado homofónico}
  \label{fig:cifradoHomofonico}
\end{figure}

	\item \textbf{Cifrado por Transposición:} consiste en realizar una permutación de las posiciones que ocupan las letras escritas, un ejemplo podría ser escribir todo el texto con una cierta longitud preestablecida y luego leerlo por columnas en vez de por filas. En la figura \ref{fig:cifradoTransposicion} podemos ver un ejemplo del mecanismo de cifrado.  

\begin{figure}
  \centering
    \includegraphics[scale=0.4]{./ConocimientosPrevios/imagenes/cifradoTransposicion.png}
  \caption{Ejemplo de cifrado por sustitución}
  \label{fig:cifradoTransposicion}
\end{figure}	

	\item \textbf{Cifrado Producto:} Es un cifrado que combina sustitución y transposición y se puede considerar como un encadenamiento de varios cifrados. Esto da lugar a cifrados complejos, seguros y dificiles de atacar, ya que tendríamos que averiguar no solo el método utilizado igual que la clave también tendríamos que saber el orden en el que se ha ejecutado.


	\item \textbf{Cifrado Vernam:} es un tipo de cifrado que se denomina cifrado de flujo. El texto en claro se combina con una cadena del mismo tamaño que el texto en claro de número aleatorios o pseudoaleatorio por medio de la función XOR. Lo inventó Gilbert Vernam que era un ingeniero de AT\&T en 1917. Es también conocido como RC4 en internet.  
	
\end{itemize}

La criptografía dio un gran salto en cuanto a calidad en el momento en el que se pudieron empezar a usar ordenadores para encriptar y desencriptar textos, debido a que los ordenadores son máquinas que las tareas repetitivas las hacen muy bien y muy rápidos.

Se empezaron a idear nuevos algoritmos de cifrado mucho más complejos, los cuales se pueden dividir en dos grandes grupos, la criptografía de clave simétrica y la criptografía de clave pública.

A continuación vamos a explicar brevemente los algoritmos más famosos de estos dos grupos.

\textbf{Clave simétrica}
	
Esta técnicas de criptografía se principal característica es que usan la misma clave para encriptar y desencriptar.
\begin{itemize}

	\item \textbf{Data Encryption Standard (DES):} Fue presentado por IBM en 1974, para generar un estandar para cifrado de transmisión de datos y para cifrado de almacenamiento de datos, para el gobierno, empresas privadas o cualquier tipo de usuario. IBM comenzó el desarrollo basandose en un dispositivo de cifrado llamado Lucifer el cual tenia una clave de 128 bits. Es un criptosistema de clave secreta que cifra en bloques de 64 bits del texto en claro y genera otros bloques de 64 bits del texto cifrado. La clave utilizada también es de 64 bits, pero el bit final de cada octeto de los 64 bits de la clave se usa como bit de paridad para control de errores. El cifrado se realiza en 16 iteraciones en las que se usan varias operaciones como son operaciones XOR, permutaciones y sustituciones. El esquema para cifrar se puede ver en la figura \ref{fig:cifradoDes}.
	
\begin{figure}
  \centering
    \includegraphics{./ConocimientosPrevios/imagenes/cifradoDes.png}
  \caption{Iteraciones en el cifrado DES}
  \label{fig:cifradoDes}
\end{figure}

\item \textbf{AES (Rijndael):} Fue presentado al concurso AES el 2 de enero de 1997 y anunciado ganador en 2001. Fue diseñado por dos criptólogos llamados Joan Daemen y Vincent Rijmen, ambos estudiantes de la Katholieke Universiteit Leuven de Bélgica. Al contrario que DES, AES es una red de sustituciones y permutaciones no una red de Feistel, se transformó en estándar efectivo el 26 de mayo de 2002 y en la actualidad es uno de los algoritmos de encriptación más famosos. Opera con bloques de 128 bits y tiene claves de 128, 192 y 256 bits.

\end{itemize}

El mayor problema que tiene este tipo de criptografía es que para que el destinatario pueda leer el mensaje necesita saber la clave y el intercambio de clave puede ser un problema muy grande, si los dos usuarios no se pueden comunicar directamente, ya que usando cualquier otro método podría ser interceptado y todo el proceso de encriptación no serviría de nada.

\textbf{Clave de Clave Pública}

La criptografía de clave pública fue inventada por Diffie y Hellman y paralelamente por Merkle y ambos grupos aportaron a la criptografía el concepto de la utilización de pares de claves.

La característica principal es que cada usuario posee dos claves una privada que solo conoce el dueño de la clave y será usada para descifrar todo lo que otros usuarios cifren con su clave pública, así de esta forma si una persona quiere comunicarse con otra de forma secreta solo tiene que conocer su clave pública, cifrar con ella y el destinatario podrá desencriptar el mensaje con su clave privada. También posee una clave pública que será conocida por el resto de usuarios y que estos usarán para encriptar el mensaje que queremos que sea secreto. 

Otras características son que las claves son imposibles de deducir una a partir de la otra, cualquier usuario puede encriptar un mensaje con la clave pública pero no puede desencriptarla, ya que solo se puede desencriptar con la clave privada. Ambas cláves son de una gran longitud y son generadas por exponenciación y/o productos de números primos grandes.

En los primeros años de existencia de la criptografía de clave pública se inventaron tres sistemas, Algoritmo de la mochila de Merkle-Hellman que fue roto, el esquema de McEliece que está considerado imposible de llevar a la práctica y un tercero que es el que explicaremos a continuación llamado RSA que es el más usado actualmente.

\begin{itemize}

	\item \textbf{RSA:} Su nombre proviene de sus creadores que son Rivest, Shamir y Adleman y se basaron en la idea de ``es muy fácil multiplicar dos números enteros primos grandes, pero extremadamente difícil hallar la factorización del producto" cuando inventaron el RSA en 1997.



\end{itemize}







